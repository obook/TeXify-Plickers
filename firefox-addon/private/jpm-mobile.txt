npm install jpm-mobile --global
jpm-mobile run
jpm-mobile run

/usr/local/lib/node_modules/jpm-mobile/bin/jpm-mobile:50
if (cmd.isEmptyCommand(program)) {
    ^
ReferenceError: cmd is not defined
    at Object.<anonymous> (/usr/local/lib/node_modules/jpm-mobile/bin/jpm-mobile:50:5)
    at Module._compile (module.js:456:26)
    at Object.Module._extensions..js (module.js:474:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Function.Module.runMain (module.js:497:10)
    at startup (node.js:119:16)
    at node.js:902:3

    Il faut modifier  /usr/local/bin/jpm-mobile  :

+var cmd = require("jpm/lib/cmd");

-    run(manifest, makeOptions(program, "run")).then(null, console.error);
+    run(manifest, makeOptions(program, "run"))

-    run(manifest, makeOptions(program, "test")).then(null, console.error);
+    run(manifest, makeOptions(program, "test"))

    Ce qui donne :


    #!/usr/bin/env node

var path = require("path");
var program = require("commander");
var VERSION = require("../package.json").version;
var cmd = require("jpm/lib/cmd");
var run = require("../lib/run").run;
var cwd = process.cwd();

program
  .version(VERSION)
  .option("--adb <path>", "Path to adb.")
  .option("-b, --binary <name>", "Name of Firefox binary to use (ex: nightly, beta, firefox).")
  .option("-v, --verbose", "More verbose logging to stdout.");

program
  .command("docs")
  .description("Open the jpm-mobile documentation on MDN.")
  .action(function() {
    open("https://developer.mozilla.org/en-US/Add-ons/SDK/Tools/jpm-mobile")
  });

program
  .command("run")
  .description("Install and run the current addon in Firefox for Mobile.")
  .action(function () {
    var manifest = require(path.join(cwd, "package.json"));
    run(manifest, makeOptions(program, "run"))
  });

program
  .command("test")
  .description("Install, run, and test the current addon in Firefox for Mobile.")
  .action(function () {
    var manifest = require(path.join(cwd, "package.json"))
    run(manifest, makeOptions(program, "test"))
  });

function makeOptions(program, command) {
  return {
    command: command,
    adb: program.adb,
    binary: program.binary,
    verbose: program.verbose
  };
}

program.parse(process.argv);

// If no command (run, xpi, init, etc.) specified, display basic help
if (cmd.isEmptyCommand(program)) {
  program.help();
}

 
